@startuml
actor User
participant System
participant API as API
participant Embedder
database "VectorDB" as DB
participant Retriever
participant Transformer
participant Report

autonumber

title Report Generation Process

User -> System : requestData(company)
System -> API: find(company)
API --> System: return(data)
System -> Embedder: parse(data)
Embedder -> Embedder: tokenize(data)
Embedder -> DB: store(vectors)
DB --> Embedder: Confirm
Embedder --> System: Confirm

System -> Report **:create

loop#lightyellow #lightyellow While Report is generating
    System -> Retriever: prompt(prompt)
    Retriever -> DB: retrieveContext()
    DB --> Retriever: return(context)
    Retriever -> Retriever: detokenize(context)
    Retriever -> Transformer: callGenerate(prompt, context)
    Transformer -> Transformer: generate(prompt,context)
    Transformer --> System: return(output)
    System -> Report: write(output)
    Report --> System: Confirm
end

System --> User: Confirm

@enduml